{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\npm\\\\repo2\\\\db.github.io\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import*as React from\"react\";import logo from\"./logo.svg\";import'./App.css';import'./style.css';import{HashRouter as Router,Route,Link}from'react-router-dom';import'bootstrap/dist/css/bootstrap.min.css';import{ProjectsContainer}from'./projects';import{ButtonsComponent}from'./buttonsNav';import About from'./about';import Chat from'./Chat';import Admin from'./Admin';import{connect}from\"react-redux\";import{postsFetched,getAllStatPostsAction,getAllStatPostsImages}from\"./config/actions/index\";import{fire,base,storage}from'./config/Fire';import{Link2,animateScroll as scroll}from\"react-scroll\";import{ProjectContainer}from\"./Project\";export var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.sendState=_this.sendState.bind(_assertThisInitialized(_this));_this.onSync=_this.onSync.bind(_assertThisInitialized(_this));_this.onPush=_this.onPush.bind(_assertThisInitialized(_this));_this.onAction=_this.onAction.bind(_assertThisInitialized(_this));_this.onImage=_this.onImage.bind(_assertThisInitialized(_this));_this.state={articles:[{title:\"React Redux Tutorial for Beginners\",id:1},{title:\"TypeScript tutorial for beginners\",id:2}],temporary:[],a:[],ref:[],ref2:[]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){// fetch(\"https://randomuser.me/api/?format=json&results=10\")\n//   .then(res => res.json())\n//   .then(json => this.props.postsFetched(json.results));\n//await this.sendState();\nthis.onSync();this.onAction();//console.log(this.props);\n}},{key:\"ref2\",value:function ref2(temp){this.setState({ref2:temp});}},{key:\"onAction\",value:function onAction(){this.props.getAllStatPostsAction();var temp=[];var storageRef=storage.ref(\"images\");storageRef.list().then(function(result){console.log(result.items);result.prefixes.forEach(function(imageRef){//nazwa folderu zawierająca zdjecia\nconsole.log(imageRef.name);var foldername=imageRef.name;imageRef.list().then(function(result2){result2.items.forEach(function(imageRef2){var filename=imageRef2.name;imageRef2.getDownloadURL().then(function(url){console.log(foldername,\"url\",url);//zapisywanie w tablicy adresu url obrazka razem z id posta do ktorego zostal przypisany\nvar array=[foldername,url,filename];temp.push(array);});});});//console.log(imageRef.getDownloadURL());\n//this.onImage(imageRef);\n//console.log(imageRef.getDownloadURL());\n});}).catch(function(error){// Handle any errors\n});this.ref2(temp);console.log(\"obraz\",this.state.ref2);// const storageRef = storage.ref('/images/1576580835000').getDownloadURL();\n//zapisywanie do stanu adresów obrazków\nthis.props.getAllStatPostsImages(temp);console.log(this.props.posts2);console.log(\"Obrazy\",this.props.images);}},{key:\"sendState\",value:function(){var _sendState=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:this.postsRef=base.syncState('posts',{context:this,state:'temporary'});//this.props.postsFetched(this.state.temporary);\n//console.log(this.state.temporary);\ncase 1:case\"end\":return _context.stop();}}},_callee,this);}));function sendState(){return _sendState.apply(this,arguments);}return sendState;}()},{key:\"onImage\",value:function onImage(imageRef){console.log(imageRef);var fileURLs=[];imageRef.getDownloadURL().then(function(url){// TODO: Display the image on the UI\nconsole.log(url);//   this.setState({\n//     ref2: [\n//         ...this.state.ref2,\n//         url\n//     ]\n// });\n}).catch(function(error){// Handle any errors\n});console.log(this.state.ref2);}},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case\"end\":return _context2.stop();}}},_callee2);}));function componentDidUpdate(){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"onPush\",value:function onPush(){var ref=fire.database().ref().child(\"posts\");var a=[\"test\"];this.props.postsFetched(a);var snap;ref.on('value',function(snapshot){snap=snapshot.val();console.log(snap);});for(var i in snap){a.push({id:i,title:snap[i][\"title\"],text:snap[i][\"text\"]});console.log(\"\\n\"+snap[i]);//for (var n in snap[i]){\n//     console.log(n, snap[i][n])     \n// }\n}if(ref==null){console.log(\"pusta zmienna\");this.onPush();}else{this.props.postsFetched(a);}return a;}},{key:\"onSync\",value:function(){var _onSync=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var b,a;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:b=[];b.push({id:1,title:\"test\",text:\"text\"});//console.log(ref);\na=[];a=this.onPush();console.log(a);if(this.props.posts){console.log(this.props.posts);}// if(a.length=0){\n//   console.log(\"nie jest 0\");\n// this.props.postsFetched(a);\n// a=null;\n// }else{\n//     this.props.postsFetched(this.onPush());\n// }\n//console.log(this.state.temporary);\n//console.log(this.state.temporary);\n// var results = this.state.temporary;\n// console.log(results.length);\n//         var temporary = [], item;\n//         for (var i = 1, len = results.length; i < len; i++) {\n//             item = results[i];\n//             //console.log(item[\"title\"]);\n//             //temporary.push({id: item.title, title: item.text});\n//         }\n//         //console.log(temporary);\n//console.log(a);\n//this.setState(a);\ncase 6:case\"end\":return _context3.stop();}}},_callee3,this);}));function onSync(){return _onSync.apply(this,arguments);}return onSync;}()},{key:\"render\",value:function render(){if(this.props.posts.length==0){// this.onSync();//this.props.postsFetched(this.state.a);\n}return React.createElement(\"div\",{className:\"App\"},React.createElement(Router,{basename:\"/db.github.io\"},React.createElement(\"header\",{className:\"App-header\"},React.createElement(\"ul\",{className:\"ButtonUl\"},React.createElement(\"li\",null,React.createElement(Link,{className:\"button\",to:\"/projects\"},\"Projekty\")),React.createElement(\"li\",null,React.createElement(Link,{className:\"button\",to:\"/about\"},\"o mnie\")),React.createElement(\"li\",null))),React.createElement(\"div\",{className:\"Router\"},React.createElement(Route,{exact:true,path:\"/projects\",component:ProjectsContainer}),React.createElement(Route,{path:\"/about\",component:About}),React.createElement(Route,{path:\"/admin\",component:Admin}))),React.createElement(\"div\",null,\"Dominik Bulandra 2022\"));}}]);return App;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{posts2:state.allposts.statPostState,posts:state.posts,images:state.allposts.statPostImages};};var mapDispatchToProps={postsFetched:postsFetched,getAllStatPostsAction:getAllStatPostsAction,getAllStatPostsImages:getAllStatPostsImages};export var AppContainer=connect(mapStateToProps,mapDispatchToProps)(App);","map":{"version":3,"sources":["C:/npm/repo2/db.github.io/src/App.js"],"names":["React","HashRouter","Router","Route","Link","ProjectsContainer","ButtonsComponent","About","Chat","Admin","connect","postsFetched","getAllStatPostsAction","getAllStatPostsImages","fire","base","storage","Link2","animateScroll","scroll","ProjectContainer","App","props","sendState","bind","onSync","onPush","onAction","onImage","state","articles","title","id","temporary","a","ref","ref2","temp","setState","storageRef","list","then","result","console","log","items","prefixes","forEach","imageRef","name","foldername","result2","imageRef2","filename","getDownloadURL","url","array","push","catch","error","posts2","images","postsRef","syncState","context","fileURLs","database","child","snap","on","snapshot","val","i","text","b","posts","length","Component","mapStateToProps","allposts","statPostState","statPostImages","mapDispatchToProps","AppContainer"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport './style.css';\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Link\r\n} from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {ProjectsContainer} from './projects';\r\nimport {ButtonsComponent} from './buttonsNav';\r\nimport About from './about';\r\nimport Chat from './Chat';\r\nimport Admin from './Admin';\r\nimport { connect } from \"react-redux\";\r\nimport { postsFetched,getAllStatPostsAction,getAllStatPostsImages } from \"./config/actions/index\";\r\nimport {fire  , base, storage}  from './config/Fire';\r\nimport { Link2, animateScroll as scroll } from \"react-scroll\";\r\nimport { ProjectContainer } from \"./Project\";\r\nexport class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n   \r\n    this.sendState = this.sendState.bind(this);\r\n    this.onSync = this.onSync.bind(this);\r\n    this.onPush = this.onPush.bind(this);\r\n    this.onAction= this.onAction.bind(this);\r\n    this.onImage=this.onImage.bind(this);\r\n    this.state = {\r\n      articles: [\r\n        { title: \"React Redux Tutorial for Beginners\", id: 1 },\r\n        { title: \"TypeScript tutorial for beginners\", id: 2 }\r\n      ],\r\n      temporary: [],\r\n      a: [],\r\n      ref: [],\r\n      ref2: []\r\n    };\r\n  }\r\n\r\n\r\n componentDidMount() {\r\n    // fetch(\"https://randomuser.me/api/?format=json&results=10\")\r\n    //   .then(res => res.json())\r\n    //   .then(json => this.props.postsFetched(json.results));\r\n      \r\n    \r\n   //await this.sendState();\r\n\r\n  \r\n  this.onSync();\r\n  this.onAction();\r\n //console.log(this.props);\r\n \r\n    \r\n  }\r\n  ref2(temp){\r\n    this.setState({\r\n      ref2: temp\r\n      \r\n  });\r\n}\r\n  \r\n  \r\n  onAction(){\r\n    this.props.getAllStatPostsAction();\r\n    var temp =[];\r\n    var storageRef = storage.ref(\"images\");\r\n   \r\n    storageRef.list().then(function(result) {\r\n      console.log(result.items);\r\n      result.prefixes.forEach(function(imageRef) {\r\n        //nazwa folderu zawierająca zdjecia\r\n       console.log(imageRef.name);\r\n       \r\n       var foldername=imageRef.name;\r\n   \r\n        imageRef.list().then(function(result2) {\r\n        \r\n        result2.items.forEach(function(imageRef2) {\r\n          var filename=imageRef2.name;\r\n          \r\n          imageRef2.getDownloadURL().then(function(url) {\r\n\r\n            console.log(foldername,\"url\",url);\r\n            //zapisywanie w tablicy adresu url obrazka razem z id posta do ktorego zostal przypisany\r\n            var array=[foldername,url,filename]\r\n            temp.push(array);\r\n        });\r\n      });\r\n      });\r\n      //console.log(imageRef.getDownloadURL());\r\n     \r\n        //this.onImage(imageRef);\r\n        //console.log(imageRef.getDownloadURL());\r\n      });\r\n    }).catch(function(error) {\r\n      // Handle any errors\r\n    });\r\n\r\n    this.ref2(temp);\r\n\r\n        console.log(\"obraz\",this.state.ref2);\r\n   // const storageRef = storage.ref('/images/1576580835000').getDownloadURL();\r\n\r\n\r\n   //zapisywanie do stanu adresów obrazków\r\n    this.props.getAllStatPostsImages(temp);\r\n\r\n    \r\n    console.log(this.props.posts2);\r\n    console.log(\"Obrazy\",this.props.images);\r\n  }\r\n  async sendState(){\r\n    this.postsRef =base.syncState('posts',{\r\n      context: this,\r\n      state: 'temporary'\r\n  });\r\n \r\n  //this.props.postsFetched(this.state.temporary);\r\n\r\n  //console.log(this.state.temporary);\r\n  \r\n  }\r\n  onImage(imageRef) {\r\n    console.log(imageRef);\r\n    var fileURLs = [];\r\n    imageRef.getDownloadURL().then(function(url) {\r\n      // TODO: Display the image on the UI\r\n      console.log(url);\r\n    //   this.setState({\r\n    //     ref2: [\r\n    //         ...this.state.ref2,\r\n    //         url\r\n    //     ]\r\n    // });\r\n    }).catch(function(error) {\r\n      // Handle any errors\r\n    });\r\n    console.log(this.state.ref2);\r\n  };\r\n async componentDidUpdate(){\r\n   \r\n   // console.log(this.props.posts);\r\n  }\r\n  onPush(){\r\n    let ref = fire.database().ref().child(\"posts\");\r\n    var a = [\"test\"];\r\n    this.props.postsFetched(a);\r\n    let snap;\r\n  ref.on('value', function(snapshot) {\r\n      snap = snapshot.val();\r\n      console.log(snap);\r\n  });\r\n\r\n\r\n  for (var i in snap){\r\n   \r\n    a.push({id: i, title: snap[i][\"title\"], text: snap[i][\"text\"]});\r\n  console.log(\"\\n\" + snap[i]);\r\n    //for (var n in snap[i]){\r\n    //     console.log(n, snap[i][n])     \r\n // }\r\n \r\n}\r\nif(ref==null){\r\n  console.log(\"pusta zmienna\");\r\nthis.onPush();\r\n}else{\r\n  this.props.postsFetched(a);\r\n \r\n}\r\n  return a;\r\n  }\r\n  async onSync(){\r\n    var b = [];\r\n    b.push({id: 1, title: \"test\", text: \"text\"});\r\n    \r\n    //console.log(ref);\r\n    var a = [];\r\n    a=this.onPush();\r\n    console.log(a);\r\n    \r\n    if (this.props.posts){\r\n      console.log(this.props.posts);\r\n    }    \r\n  // if(a.length=0){\r\n  //   console.log(\"nie jest 0\");\r\n  // this.props.postsFetched(a);\r\n  // a=null;\r\n  // }else{\r\n  //     this.props.postsFetched(this.onPush());\r\n  \r\n  // }\r\n    //console.log(this.state.temporary);\r\n    //console.log(this.state.temporary);\r\n    // var results = this.state.temporary;\r\n    // console.log(results.length);\r\n   \r\n\r\n    //         var temporary = [], item;\r\n    //         for (var i = 1, len = results.length; i < len; i++) {\r\n    //             item = results[i];\r\n    //             //console.log(item[\"title\"]);\r\n    //             //temporary.push({id: item.title, title: item.text});\r\n    //         }\r\n    //         //console.log(temporary);\r\n            \r\n            \r\n    \r\n    \r\n            //console.log(a);\r\n            //this.setState(a);\r\n         \r\n   \r\n            \r\n  }\r\n  render() {\r\n    if(this.props.posts.length==0){\r\n     // this.onSync();//this.props.postsFetched(this.state.a);\r\n   }\r\n   \r\n  return (\r\n    <div className=\"App\" >\r\n      <Router basename=\"/db.github.io\">\r\n      \r\n      <header className=\"App-header\">\r\n     \r\n      <ul className=\"ButtonUl\">\r\n            <li>\r\n              <Link className=\"button\" to=\"/projects\">Projekty</Link>\r\n            </li>\r\n            <li>\r\n              <Link  className=\"button\" to=\"/about\">o mnie</Link>\r\n            </li>\r\n            <li>\r\n            {/* <button onClick={()=>{ window.scrollTo(0, 300);;}}>scrool</button>\r\n            <button onClick={this.elScroll.executeScroll}>Click to scroll </button> */}\r\n            </li>\r\n            \r\n           \r\n            {/* <li>\r\n            <button onClick={this.onSync}>sync</button>\r\n            </li>\r\n            <li>\r\n            <button onClick={this.onAction}>test action</button>\r\n            </li> */}\r\n          </ul>\r\n         \r\n        \r\n      </header>\r\n      <div className=\"Router\">\r\n      <Route exact path=\"/projects\" component={ProjectsContainer}/>\r\n      <Route path=\"/about\" component={About} />\r\n      <Route path=\"/admin\" component={Admin} /> \r\n      </div>\r\n      </Router>\r\n      <div>Dominik Bulandra 2022</div>\r\n    </div>\r\n    \r\n    \r\n  );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  \r\n  return {\r\n    posts2: state.allposts.statPostState,\r\n    posts: state.posts,\r\n    images: state.allposts.statPostImages\r\n  }\r\n};\r\nconst mapDispatchToProps = { postsFetched,getAllStatPostsAction,getAllStatPostsImages };\r\n\r\nexport const AppContainer = connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}